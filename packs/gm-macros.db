{"name":"GM: Fix broken temp bonus values (0.5.8)","permission":{"default":0},"type":"script","flags":{},"scope":"global","command":"const actors = ui.actors.entities;\nfor (const key in actors) {\n  if (actors.hasOwnProperty(key)) {\n    const actor = actors[key];\n    if (actor.type !== \"character\") continue;\n    const updates = {};\n    const list = actor.data.data.temp;\n    const set = [\"ini-bonus\", \"ap-bonus\", \"lep-bonus\", \"idee-bonus\", \"coup-bonus\"];\n    for (const key in set) {\n      const name = set[key];\n      if (list.hasOwnProperty(name)) {\n        const value = list[name];\n        if (value && value.hasOwnProperty(\"value\")) {\n          updates[`data.temp.${name}`] = value.value;\n        }\n      }\n    }\n    if (!$.isEmptyObject(updates)) {\n      console.log(`Fixing ${actor.name}`, updates);\n      actor.update(updates);\n    }\n  }\n}","author":"6zpN0EQmwsdmTRQO","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"kSAzPFi3b6TCtXnm"}
